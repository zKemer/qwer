const fs = require('fs');

module.exports.syncFile = (darkName) => {
    if (!darkName) return false;
    if (fs.existsSync(darkName) == false) {
        fs.writeFileSync(darkName, '{}');
    };
};

module.exports.set = (dbName, dbValue, oldDB) => {
    if (!dbName || !dbValue || !oldDB) return false;
    dbName = dbName.split("'").join('').split('"').join('').split(']').join('').split('[').join('.');

    for(let i = 0; i < (dbName.split('.').length - 1); i++) {
        if (typeof dbName.split('.')[i] !== 'object') oldDB[dbName.split('.')[i]] = {};
        oldDB = oldDB[dbName.split('.')[i]];
    };
    oldDB[dbName.split('.')[dbName.split('.').length - 1]] = dbValue;
};

module.exports.get = (dbName, DataBase) => {
    if (!dbName || !DataBase) return false;
    return dbName.split('.').reduce((fetchData, dataID) => {
        return fetchData[`${dataID}`];
    }, DataBase);
};

module.exports.delete = (dbName, DataBase) => {
    if (!dbName || !DataBase) return false;
    for(let i = 0; i < (dbName.split('.').length - 1); i++) {
        DataBase = DataBase[dbName.split('.')[i]];
        if (typeof DataBase == 'undefined') return;
    };
    delete DataBase[dbName.split('.').pop()];
};